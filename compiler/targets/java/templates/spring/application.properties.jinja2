# Application Configuration
spring.application.name={{ app_name | lower }}
server.port={{ server_port | default(8080) }}

# Database Configuration
spring.datasource.url={{ database_url }}
spring.datasource.username={{ db_username }}
spring.datasource.password={{ db_password }}

{% if database == 'h2' %}
spring.datasource.driver-class-name=org.h2.Driver
# H2 Console (for development)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.web-allow-others=false
{% elif database == 'mysql' %}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
{% elif database == 'postgresql' %}
spring.datasource.driver-class-name=org.postgresql.Driver
{% elif database == 'sqlite' %}
spring.datasource.driver-class-name=org.sqlite.JDBC
{% endif %}

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto={{ ddl_auto | default('update') }}
spring.jpa.show-sql={{ show_sql | default('true') }}
spring.jpa.format-sql=true
{% if database != 'h2' %}
spring.jpa.database-platform=org.hibernate.dialect.{% if database == 'mysql' %}MySQL8Dialect{% elif database == 'postgresql' %}PostgreSQLDialect{% endif %}
{% endif %}

# Logging Configuration
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
{% if custom_logging %}
{% for logger in custom_logging %}
logging.level.{{ logger.name }}={{ logger.level }}
{% endfor %}
{% endif %}

# Jackson Configuration (JSON handling)
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=UTC

# Management Endpoints (Actuator)
{% if enable_actuator %}
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
{% endif %}

{% if custom_properties %}
# Custom Application Properties
{% for prop in custom_properties %}
{{ prop.key }}={{ prop.value }}
{% endfor %}
{% endif %}